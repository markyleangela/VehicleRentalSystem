{% extends 'admin_dashboard.html' %}
{% load static %}


{% block extra_css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'admin_dashboard/css/vehicle_list.css' %}">
{% endblock %}

{% block content %}
<div class="header-container">
    <h1>Vehicles</h1>
    <a href="{% url 'create_vehicle_page' %}" class="add-button">Add Unit</a>
</div>
<div class="tabs">
    <!-- Submit the filter via query parameters -->
    <a href="?status=all">All</a>
    <a href="?status=available">Available</a>
    <a href="?status=in_use" >In Use</a>
    <a href="?status=deleted">Deleted</a>
</div>

<div class="vehicles-list">
    {% for vehicle in vehicles %}
        <div class="vehicle-card">
            <img src="{{ vehicle.image_base64 }}" alt="{{ vehicle.vehicle_model }}" class="vehicle-image">
            <div class="vehicle-details">
                <h3>{{ vehicle.vehicle_brand }} <span>{{ vehicle.vehicle_model }}</span></h3>
                <div class="vehicle-status">
                    <span class="{{ vehicle.vehicle_status|lower }}">{{ vehicle.vehicle_status }}</span>
                    <span>{{ vehicle.vehicle_capacity }} Unit</span>
                </div>
                <p>Transmission: {{ vehicle.vehicle_transmission }}</p>
                <p>Capacity: {{ vehicle.vehicle_type }} seats</p>
                <p class="price">Price: â‚±{{ vehicle.vehicle_price }}/day</p>
            </div>
            <div class="vehicle-actions-container">
                <div class="action-buttons">
                    <a href="{% url 'read_vehicle' vehicle.vehicle_id %}" class="edit-button">Select</a>
                    {% if not vehicle.vehicle_is_deleted %}
                        <a href="{% url 'update_vehicle_page' vehicle.vehicle_id %}" class="edit-button">Edit</a>
                        <form method="POST" action="{% url 'vehicle_list' %}" onsubmit="return confirmDelete()">
                            {% csrf_token %}
                            <button type="submit" name="delete_vehicle" value="{{ vehicle.vehicle_id }}" class="delete-button">Delete</button>
                        </form>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endfor %}
</div>
{% endblock %}

{% block extra_js %}
<script>
    function confirmDelete() {
        return confirm("Are you sure you want to delete this vehicle?");
    }
</script>
<script src="{% static 'js/vehicle_list.js' %}?v={{ STATIC_VERSION }}"></script>
{% endblock %}
